flows:
  research_car_recommendations:
    description: Research car recommendations and reviews using web search to help users make informed decisions. Start if user wants advice on which car to buy or how much they cost. Provide price estimates for car models.
    persisted_slots:
      - research_query
      - car_model
    steps:
      - collect: car_model
        description: An EXISTING, in-market car model the user is interested in. Use the official/canonical model name including brand (e.g., "Honda Civic", "Ford F-150", "Toyota Camry") rather than nicknames or abbreviations like "civic", "f150", or "camry". Only set this slot with the names of REAL car brands and models you can actually buy. NEVER set this slot with fictional vehicles.
      - collect: research_query
        description: The search query for car research (e.g., 'best compact SUV 2024', 'Honda CR-V vs Toyota RAV4 review'). Extract or infer from user's car preferences and needs. Also search for the prices of these cars.
      - action: action_research_cars
        next:
          - if: not slots.research_results
            then:
              - action: utter_research_failed
                next: END
          - else:
              - action: utter_research_results
                next: END

version: "3.1"

actions:
  - action_check_loan_qualification

slots:
  loan_approved:
    type: bool
    mappings:
      - type: controlled
  credit_tier:
    type: text
    mappings:
      - type: controlled
  credit_score:
    type: float
    mappings:
      - type: controlled
  current_debt_to_income:
    type: float
    mappings:
      - type: controlled
  loan_options:
    type: any
    mappings:
      - type: controlled
  denial_reason:
    type: text
    mappings:
      - type: controlled
  suggested_down_payment:
    type: float
    mappings:
      - type: controlled

responses:
  utter_loan_approved:
    - text: "Great news! You're approved for financing on the ${car_price} vehicle. Your credit tier is '{credit_tier}' with available loan options."
    - condition: slots.suggested_down_payment
      text: "Great news! You're approved for financing on the ${car_price} vehicle. Your credit tier is '{credit_tier}'. Consider a ${suggested_down_payment} down payment to get better terms."
  utter_loan_denied:
    - text: "I'm sorry, but you don't qualify for financing on this ${car_price} vehicle. {denial_reason}"
